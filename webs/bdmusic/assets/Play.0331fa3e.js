import{h as d,J as O,K as D,o as w,b as H,j as h,k as e,L as X,u as t,a as p,M as g,C as $,p as v,v as y,N as F,O as T,x as J,P as K,c as k,Q,y as R,z as W,A as q,R as G}from"./vendor.2628e9e8.js";import{f as j}from"./Date.dfd4e255.js";import Y from"./Lyric.00b6b238.js";import{_ as Z,s as ee,g as b,a as se}from"./index.96812608.js";const i=f=>(W("data-v-015270d3"),f=f(),q(),f),te={class:"flex justify-center items-center w-full text-center"},le=i(()=>e("path",{d:"M19 9l-7 7-7-7","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),oe=[le],re={class:"w-10/12 text-ellipsis truncate"},ne=i(()=>e("li",{class:"w-1/12 inline-flex justify-end"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor","stroke-width":"1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),ae={class:"CDdisk"},ie={class:"progress"},ce={class:"order-1 text-[#dadada] text-sm antialiased"},ue={class:"order-2 text-[#a5a5a5] text-sm"},de={class:"play"},pe={class:"flex items-center justify-evenly"},he=i(()=>e("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),fe=[he],me=i(()=>e("li",null,[e("svg",{class:"h-7 w-7",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),_e=i(()=>e("path",{d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),we=i(()=>e("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),ve=[_e,we],ye=i(()=>e("circle",{cx:"12",cy:"12",r:"9"},null,-1)),xe=i(()=>e("line",{x1:"10",x2:"10",y1:"15",y2:"9"},null,-1)),ge=i(()=>e("line",{x1:"14",x2:"14",y1:"15",y2:"9"},null,-1)),ke=[ye,xe,ge],Me=i(()=>e("path",{d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),Ce=[Me],Pe=i(()=>e("li",null,[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4 6h16M4 12h16M4 18h16","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),Te=["src"],je=["src"],be=["src"],ze=G(" \u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 audio \u5143\u7D20\u3002 "),Be={setup(f){let z=d();const c=d(),r=O({currentTime:0,duration:.01,musicOverTime:"00:00",musicCurrentTime:"00:00"}),m=d(!1),M=d(0),_=d([]);let C=d(0);const s=ee(),B=l=>l.split(`
`).map((o,a,n)=>{const u=o.match(/\[(\d{2}):(\d{2})\.(\d{2,})\]/);if(u){const I=parseInt(u[1],10),N=parseInt(u[2],10),L=parseInt(u[3],10),V=o.replace(/\[(\d{2}):(\d{2})\.(\d{2,})\]/g,"");return{time:I*60+N+L/1e3,text:V}}return{time:0,text:""}}),S=l=>{switch(l.target.className){case"el-progress-bar__outer":case"el-progress-bar__inner":{c.value.pause();const o=l.target.parentNode.offsetWidth,n=l.offsetX/o,u=r.currentTime=n*r.duration;c.value.currentTime=u,c.value.play()}}},A=()=>{s.showPlay=!1},x=()=>{s.checkPlay=!1,c.value.pause()},P=()=>{c.value.play(),s.checkPlay=!0,r.duration=c.value.duration,r.musicOverTime=j(r.duration)},E=l=>{r.currentTime=l.target.currentTime,C.value=r.currentTime/r.duration*100,r.musicCurrentTime=j(r.currentTime);const o=_.value.findIndex((a,n,u)=>a.time>=r.currentTime||u.length-1===n)||0;M.value=o},U=()=>{c.value.pause(),b(s.playMusic.nextMusic).then(l=>{l.data[0].url&&(s.playMusic.musicUrl=l.data[0].url,s.showPlay=!0,s.checkPlay=!0,c.value.online=c.value.play)})};return D(()=>s.musicId,(l,o)=>{o&&(console.log(l,o),x()),l&&(b(l).then(a=>{s.playMusic.musicUrl=a.data[0].url}),se(l).then(a=>{a.lrc&&(_.value=B(a.lrc.lyric),console.log(_.value))}))},{immediate:!0}),(l,o)=>(w(),H(t(R),{class:T([{hidden:!t(s).showPlay},"w-full mx-auto overflow-hidden h-screen absolute left-0 z-50 text-[#fff]"])},{default:h(()=>{var a;return[e("div",{ref_key:"img",ref:z,style:X(`background-image:url('${(a=t(s).playMusic.album)==null?void 0:a.blurPicUrl}?param=200y200')`),class:"bg bg-cover w-full h-full absolute -z-10 bg-center overflow-hidden blur-lg scale-125 transition-all duration-1000"},null,4),p(t($),{class:"flex items-center relative px-3"},{default:h(()=>[e("ul",te,[e("li",{class:"w-1/12 inline-flex justify-start"},[e("svg",{class:"h-7 w-7",fill:"none",stroke:"currentColor","stroke-width":"1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:A},oe)]),e("li",re,g(t(s).playMusic.name),1),ne])]),_:1}),p(t(J),{class:"px-3 py-0 flex justify-center items-center text-[#fff]"},{default:h(()=>{var n;return[v(e("div",ae,[p(t(F),{class:T([{paused:!t(s).checkPlay,play:t(s).checkPlay},"ring-50 ring-black animate-spin-slow"]),size:230,src:`${(n=t(s).playMusic.album)==null?void 0:n.blurPicUrl}?param=200y200`},null,8,["class","src"])],512),[[y,!m.value]]),v(p(Y,{lyric:_.value,"lyric-index":M.value},null,8,["lyric","lyric-index"]),[[y,m.value]])]}),_:1}),p(t(Q),{class:"h-1/6 flex flex-col justify-evenly text-[#fff]"},{default:h(()=>[e("div",ie,[p(t(K),{percentage:t(C),class:"flex space-x-6",color:"#ff0000",onClick:o[0]||(o[0]=n=>S(n))},{default:h(()=>[e("span",ce,g(t(r).musicCurrentTime),1),e("span",ue,g(t(r).musicOverTime),1)]),_:1},8,["percentage"])]),e("div",de,[e("ul",pe,[e("li",null,[(w(),k("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:o[1]||(o[1]=n=>m.value=!m.value)},fe))]),me,e("li",null,[v((w(),k("svg",{class:"h-14 w-14 stroke-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:P},ve,512)),[[y,!t(s).checkPlay]]),v((w(),k("svg",{class:"w-14 h-14",fill:"none",stroke:"#ffffff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:x},ke,512)),[[y,t(s).checkPlay]])]),e("li",null,[e("svg",{class:"h-7 w-7",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:U},Ce)]),Pe])])]),_:1}),e("audio",{ref_key:"audio",ref:c,onEnded:x,onPlay:P,onTimeupdate:o[2]||(o[2]=n=>E(n)),src:t(s).playMusic.musicUrl,autoplay:"autoplay",hidden:"",controls:""},[e("source",{src:t(s).playMusic.musicUrl,type:"audio/ogg"},null,8,je),e("source",{src:t(s).playMusic.musicUrl,type:"audio/mpeg"},null,8,be),ze],40,Te)]}),_:1},8,["class"]))}};var Ie=Z(Be,[["__scopeId","data-v-015270d3"]]);export{Ie as default};
